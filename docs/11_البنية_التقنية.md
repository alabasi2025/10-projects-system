# Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© (Technology Stack)

> **Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙŠÙˆØ«Ù‚ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© ÙˆÙ‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©**

---

## ğŸ“‹ Ø§Ù„ÙÙ‡Ø±Ø³

1. [Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©](#-Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª-Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)
2. [Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª](#-Ù‡ÙŠÙƒÙ„-Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª)
3. [Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª](#-Ù‚Ø§Ø¹Ø¯Ø©-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
4. [Ù‡ÙŠÙƒÙ„ ÙƒÙ„ Ù…Ø³ØªÙˆØ¯Ø¹](#-Ù‡ÙŠÙƒÙ„-ÙƒÙ„-Ù…Ø³ØªÙˆØ¯Ø¹)
5. [NestJS Backend](#-nestjs-backend)
6. [Angular Frontend](#-angular-frontend)
7. [Prisma ORM](#-prisma-orm)
8. [Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ø£Ù…Ø§Ù†](#-Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©-ÙˆØ§Ù„Ø£Ù…Ø§Ù†)
9. [Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ø¸Ù…Ø©](#-Ø§Ù„ØªÙƒØ§Ù…Ù„-Ø¨ÙŠÙ†-Ø§Ù„Ø£Ù†Ø¸Ù…Ø©)
10. [Ø§Ù„Ù†Ø´Ø± ÙˆØ§Ù„ØªØ´ØºÙŠÙ„](#-Ø§Ù„Ù†Ø´Ø±-ÙˆØ§Ù„ØªØ´ØºÙŠÙ„)

---

## ğŸ› ï¸ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

### Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ø¨ÙŠØ¦Ø©

| Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„ØºØ±Ø¶ |
|---------|---------|-------|
| **TypeScript** | ~5.9 | Ù„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© |
| **Node.js** | 22.x | Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ |
| **ES2022** | - | Target Ù„Ù„ØªØ±Ø¬Ù…Ø© |
| **ESNext** | - | Module System |

### Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (Frontend)

| Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„ØºØ±Ø¶ |
|---------|---------|-------|
| **Angular** | ^20.0.0 | Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ |
| **PrimeNG** | ^20.4.0 | Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª |
| **Tailwind CSS** | ^4.0.0 | Ø¥Ø·Ø§Ø± CSS |
| **RxJS** | ^7.8.0 | Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© |
| **@ngx-translate/core** | ^17.0.0 | ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª |
| **@ngx-translate/http-loader** | ^17.0.0 | ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª |
| **PrimeIcons** | ^7.0.0 | Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª |
| **Zone.js** | ~0.15.0 | Change Detection |

### Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© (Backend)

| Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„ØºØ±Ø¶ |
|---------|---------|-------|
| **NestJS** | ^11.0.0 | Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ |
| **@nestjs/jwt** | ^11.0.2 | Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© JWT |
| **@nestjs/passport** | ^11.0.5 | Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© |
| **@nestjs/event-emitter** | ^3.0.1 | Ø§Ù„Ø£Ø­Ø¯Ø§Ø« |
| **Passport** | ^0.7.0 | Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© |
| **passport-jwt** | ^4.0.1 | JWT Strategy |
| **bcrypt** | ^6.0.0 | ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± |
| **class-validator** | ^0.14.3 | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª |
| **class-transformer** | ^0.5.1 | ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª |
| **axios** | ^1.6.0 | HTTP Client |

### Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

| Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„ØºØ±Ø¶ |
|---------|---------|-------|
| **PostgreSQL** | 16.x | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù„Ø§Ø¦Ù‚ÙŠØ© |
| **Prisma** | 5.22.0 | ORM |
| **@prisma/client** | 5.22.0 | Database Client |

### Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±

| Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„ØºØ±Ø¶ |
|---------|---------|-------|
| **Nx** | ^21.0.0 | Ø¥Ø¯Ø§Ø±Ø© Monorepo |
| **Webpack** | - | Bundler |
| **ESLint** | ^9.8.0 | ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯ |
| **Prettier** | ^2.6.2 | ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¯ |
| **Jest** | ^29.7.0 | Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª |
| **ts-node** | 10.9.1 | ØªØ´ØºÙŠÙ„ TypeScript |
| **SWC** | ~1.5.7 | Ø§Ù„Ù…ØªØ±Ø¬Ù… Ø§Ù„Ø³Ø±ÙŠØ¹ |

---

## ğŸ“¦ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª

### Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª Ø§Ù„Ø¹Ø´Ø±Ø©

```
GitHub Organization: electricity-management/
â”‚
â”œâ”€â”€ core-system/              # Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù… (01)
â”‚   â””â”€â”€ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©ØŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø´Ø¬Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§ØªØŒ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ
â”‚
â”œâ”€â”€ developer-system/         # Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø·ÙˆØ± (02)
â”‚   â””â”€â”€ APIsØŒ Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§ØªØŒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŒ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
â”‚
â”œâ”€â”€ assets-system/            # Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø© (03)
â”‚   â””â”€â”€ Ø§Ù„Ø£ØµÙˆÙ„ØŒ Ø§Ù„Ø¥Ù‡Ù„Ø§ÙƒØŒ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ø·Ø§Ø±Ø¦Ø©
â”‚
â”œâ”€â”€ field-ops-system/         # Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ÙŠØ¯Ø§Ù†ÙŠØ© (04)
â”‚   â””â”€â”€ Ø§Ù„ÙØ±Ù‚ØŒ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¹Ù…Ù„ØŒ Ø§Ù„Ø²ÙŠØ§Ø±Ø§ØªØŒ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙŠØ¯Ø§Ù†ÙŠ
â”‚
â”œâ”€â”€ scada-system/             # Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… (05)
â”‚   â””â”€â”€ SCADAØŒ Ø§Ù„Ù…Ø­Ø·Ø§ØªØŒ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§ØªØŒ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
â”‚
â”œâ”€â”€ inventory-system/         # Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (06)
â”‚   â””â”€â”€ Ø§Ù„Ù…Ø®Ø§Ø²Ù†ØŒ Ø§Ù„Ø£ØµÙ†Ø§ÙØŒ Ø§Ù„ØµØ±ÙØŒ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª
â”‚
â”œâ”€â”€ billing-system/           # Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„ÙÙˆØªØ±Ø© (07)
â”‚   â””â”€â”€ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ØŒ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§ØªØŒ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ Ø§Ù„ØªØ­ØµÙŠÙ„
â”‚
â”œâ”€â”€ hr-system/                # Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© (08)
â”‚   â””â”€â”€ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†ØŒ Ø§Ù„Ø­Ø¶ÙˆØ±ØŒ Ø§Ù„Ø±ÙˆØ§ØªØ¨ØŒ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
â”‚
â”œâ”€â”€ reports-system/           # Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± (09)
â”‚   â””â”€â”€ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŒ Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§ØªØŒ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©
â”‚
â””â”€â”€ projects-system/          # Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (10)
    â””â”€â”€ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ§ØªØŒ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ØŒ Ø§Ù„Ø±Ø³Ù…Ù„Ø©
```

### Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒÙ„ Ù…Ø³ØªÙˆØ¯Ø¹

| # | Ø§Ù„Ù†Ø¸Ø§Ù… | Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ | Ø§Ù„Ù…Ù†ÙØ° Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ |
|---|--------|----------|-----------------|
| 01 | Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù… | `core-system` | API: 3001, Web: 4201 |
| 02 | Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø·ÙˆØ± | `developer-system` | API: 3002, Web: 4202 |
| 03 | Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø© | `assets-system` | API: 3003, Web: 4203 |
| 04 | Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ÙŠØ¯Ø§Ù†ÙŠØ© | `field-ops-system` | API: 3004, Web: 4204 |
| 05 | Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… | `scada-system` | API: 3005, Web: 4205 |
| 06 | Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª | `inventory-system` | API: 3006, Web: 4206 |
| 07 | Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„ÙÙˆØªØ±Ø© | `billing-system` | API: 3007, Web: 4207 |
| 08 | Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© | `hr-system` | API: 3008, Web: 4208 |
| 09 | Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± | `reports-system` | API: 3009, Web: 4209 |
| 10 | Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ | `projects-system` | API: 3010, Web: 4210 |

---

## ğŸ—„ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±ÙƒØ²ÙŠØ© ÙˆØ§Ø­Ø¯Ø©

Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ØªØªØµÙ„ Ø¨Ù†ÙØ³ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª PostgreSQL:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PostgreSQL Database                       â”‚
â”‚                   electricity_management                     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  core_*     â”‚  â”‚   dev_*     â”‚  â”‚  asset_*    â”‚        â”‚
â”‚  â”‚  tables     â”‚  â”‚   tables    â”‚  â”‚  tables     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  field_*    â”‚  â”‚  scada_*    â”‚  â”‚   inv_*     â”‚        â”‚
â”‚  â”‚  tables     â”‚  â”‚  tables     â”‚  â”‚  tables     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  bill_*     â”‚  â”‚   hr_*      â”‚  â”‚   rpt_*     â”‚        â”‚
â”‚  â”‚  tables     â”‚  â”‚  tables     â”‚  â”‚  tables     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚  proj_*     â”‚                                           â”‚
â”‚  â”‚  tables     â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§ØªØµØ§Ù„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```env
# .env ÙÙŠ ÙƒÙ„ Ù…Ø³ØªÙˆØ¯Ø¹
DATABASE_URL="postgresql://electricity_user:secure_password@db-server:5432/electricity_management"

# Ù„Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/electricity_management"
```

### ØªØ³Ù…ÙŠØ© Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ (Naming Convention)

| Ø§Ù„Ù†Ø¸Ø§Ù… | Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© | Ù…Ø«Ø§Ù„ |
|--------|---------|------|
| Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù… | `core_` | `core_users`, `core_accounts` |
| Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø·ÙˆØ± | `dev_` | `dev_integrations`, `dev_events` |
| Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø© | `asset_` | `asset_assets`, `asset_maintenance` |
| Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ÙŠØ¯Ø§Ù†ÙŠØ© | `field_` | `field_teams`, `field_tasks` |
| Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… | `scada_` | `scada_stations`, `scada_readings` |
| Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª | `inv_` | `inv_items`, `inv_warehouses` |
| Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„ÙÙˆØªØ±Ø© | `bill_` | `bill_customers`, `bill_invoices` |
| Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© | `hr_` | `hr_employees`, `hr_attendance` |
| Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± | `rpt_` | `rpt_definitions`, `rpt_schedules` |
| Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ | `proj_` | `proj_projects`, `proj_tasks` |

---

## ğŸ“‚ Ù‡ÙŠÙƒÙ„ ÙƒÙ„ Ù…Ø³ØªÙˆØ¯Ø¹

### Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ÙƒØ§Ù…Ù„

```
system-name/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                          # Angular Frontend
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ core/             # Core Module
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ core.module.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ shared/           # Shared Module
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ directives/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pipes/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ shared.module.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ features/         # Feature Modules
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ feature-1/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ feature-2/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.config.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ app.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ar.json
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ en.json
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚   â”‚   â”œâ”€â”€ environments/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ environment.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ environment.prod.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ _variables.scss
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ styles.scss
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚   â”œâ”€â”€ project.json
â”‚   â”‚   â””â”€â”€ tsconfig.app.json
â”‚   â”‚
â”‚   â””â”€â”€ api/                          # NestJS Backend
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ modules/              # Feature Modules
â”‚       â”‚   â”‚   â”œâ”€â”€ feature-1/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ feature-1.controller.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ feature-1.service.ts
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ feature-1.module.ts
â”‚       â”‚   â”‚   â””â”€â”€ feature-2/
â”‚       â”‚   â”œâ”€â”€ common/               # Shared utilities
â”‚       â”‚   â”‚   â”œâ”€â”€ decorators/
â”‚       â”‚   â”‚   â”œâ”€â”€ filters/
â”‚       â”‚   â”‚   â”œâ”€â”€ guards/
â”‚       â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚       â”‚   â”‚   â””â”€â”€ pipes/
â”‚       â”‚   â”œâ”€â”€ config/               # Configuration
â”‚       â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚       â”‚   â”‚   â””â”€â”€ app.config.ts
â”‚       â”‚   â”œâ”€â”€ prisma/               # Prisma Service
â”‚       â”‚   â”‚   â””â”€â”€ prisma.service.ts
â”‚       â”‚   â”œâ”€â”€ app.module.ts
â”‚       â”‚   â””â”€â”€ main.ts
â”‚       â”œâ”€â”€ test/
â”‚       â”œâ”€â”€ project.json
â”‚       â””â”€â”€ tsconfig.app.json
â”‚
â”œâ”€â”€ libs/                             # Ù…ÙƒØªØ¨Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…
â”‚   â”œâ”€â”€ shared-types/                 # TypeScript interfaces
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â””â”€â”€ utils/                        # Utility functions
â”‚       â””â”€â”€ src/
â”‚           â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma                 # Prisma Schema
â”‚   â”œâ”€â”€ migrations/                   # Database migrations
â”‚   â””â”€â”€ seed.ts                       # Seed data
â”‚
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile.api
â”‚   â”œâ”€â”€ Dockerfile.web
â”‚   â””â”€â”€ nginx.conf
â”‚
â”œâ”€â”€ .env.example
â”œâ”€â”€ .eslintrc.json
â”œâ”€â”€ .prettierrc
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ jest.config.ts
â”œâ”€â”€ nx.json
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.base.json
â””â”€â”€ README.md
```

---

## ğŸ”§ NestJS Backend

### Ù‡ÙŠÙƒÙ„ Module

```typescript
// src/modules/assets/assets.module.ts
import { Module } from '@nestjs/common';
import { AssetsController } from './assets.controller';
import { AssetsService } from './assets.service';
import { PrismaModule } from '../../prisma/prisma.module';

@Module({
  imports: [PrismaModule],
  controllers: [AssetsController],
  providers: [AssetsService],
  exports: [AssetsService],
})
export class AssetsModule {}
```

### Controller Ù…Ø«Ø§Ù„

```typescript
// src/modules/assets/assets.controller.ts
import {
  Controller,
  Get,
  Post,
  Put,
  Delete,
  Body,
  Param,
  Query,
  UseGuards,
  ParseUUIDPipe,
} from '@nestjs/common';
import { ApiTags, ApiOperation, ApiBearerAuth } from '@nestjs/swagger';
import { JwtAuthGuard } from '../../common/guards/jwt-auth.guard';
import { AssetsService } from './assets.service';
import { CreateAssetDto } from './dto/create-asset.dto';
import { UpdateAssetDto } from './dto/update-asset.dto';
import { AssetQueryDto } from './dto/asset-query.dto';

@ApiTags('Assets')
@ApiBearerAuth()
@UseGuards(JwtAuthGuard)
@Controller('assets')
export class AssetsController {
  constructor(private readonly assetsService: AssetsService) {}

  @Get()
  @ApiOperation({ summary: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙˆÙ„' })
  findAll(@Query() query: AssetQueryDto) {
    return this.assetsService.findAll(query);
  }

  @Get(':id')
  @ApiOperation({ summary: 'ØªÙØ§ØµÙŠÙ„ Ø£ØµÙ„' })
  findOne(@Param('id', ParseUUIDPipe) id: string) {
    return this.assetsService.findOne(id);
  }

  @Post()
  @ApiOperation({ summary: 'Ø¥Ù†Ø´Ø§Ø¡ Ø£ØµÙ„ Ø¬Ø¯ÙŠØ¯' })
  create(@Body() createAssetDto: CreateAssetDto) {
    return this.assetsService.create(createAssetDto);
  }

  @Put(':id')
  @ApiOperation({ summary: 'ØªØ¹Ø¯ÙŠÙ„ Ø£ØµÙ„' })
  update(
    @Param('id', ParseUUIDPipe) id: string,
    @Body() updateAssetDto: UpdateAssetDto,
  ) {
    return this.assetsService.update(id, updateAssetDto);
  }

  @Delete(':id')
  @ApiOperation({ summary: 'Ø­Ø°Ù Ø£ØµÙ„' })
  remove(@Param('id', ParseUUIDPipe) id: string) {
    return this.assetsService.remove(id);
  }
}
```

### Service Ù…Ø«Ø§Ù„

```typescript
// src/modules/assets/assets.service.ts
import { Injectable, NotFoundException } from '@nestjs/common';
import { PrismaService } from '../../prisma/prisma.service';
import { CreateAssetDto } from './dto/create-asset.dto';
import { UpdateAssetDto } from './dto/update-asset.dto';
import { AssetQueryDto } from './dto/asset-query.dto';
import { EventEmitter2 } from '@nestjs/event-emitter';

@Injectable()
export class AssetsService {
  constructor(
    private prisma: PrismaService,
    private eventEmitter: EventEmitter2,
  ) {}

  async findAll(query: AssetQueryDto) {
    const { page = 1, limit = 10, search, categoryId, stationId, status } = query;
    const skip = (page - 1) * limit;

    const where = {
      ...(search && {
        OR: [
          { name: { contains: search, mode: 'insensitive' } },
          { code: { contains: search, mode: 'insensitive' } },
        ],
      }),
      ...(categoryId && { categoryId }),
      ...(stationId && { stationId }),
      ...(status && { status }),
    };

    const [data, total] = await Promise.all([
      this.prisma.asset_assets.findMany({
        where,
        skip,
        take: limit,
        include: {
          category: true,
          station: true,
        },
        orderBy: { createdAt: 'desc' },
      }),
      this.prisma.asset_assets.count({ where }),
    ]);

    return {
      data,
      meta: {
        total,
        page,
        limit,
        totalPages: Math.ceil(total / limit),
      },
    };
  }

  async findOne(id: string) {
    const asset = await this.prisma.asset_assets.findUnique({
      where: { id },
      include: {
        category: true,
        station: true,
        maintenanceHistory: {
          take: 10,
          orderBy: { createdAt: 'desc' },
        },
      },
    });

    if (!asset) {
      throw new NotFoundException(`Ø§Ù„Ø£ØµÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯: ${id}`);
    }

    return asset;
  }

  async create(dto: CreateAssetDto) {
    const code = await this.generateAssetCode(dto.categoryId, dto.stationId);

    const asset = await this.prisma.asset_assets.create({
      data: {
        ...dto,
        code,
        currentValue: dto.acquisitionCost,
        status: 'active',
      },
    });

    this.eventEmitter.emit('asset.created', asset);

    return asset;
  }

  async update(id: string, dto: UpdateAssetDto) {
    await this.findOne(id);

    const asset = await this.prisma.asset_assets.update({
      where: { id },
      data: dto,
    });

    this.eventEmitter.emit('asset.updated', asset);

    return asset;
  }

  async remove(id: string) {
    await this.findOne(id);

    await this.prisma.asset_assets.update({
      where: { id },
      data: { 
        status: 'deleted',
        deletedAt: new Date(),
      },
    });

    this.eventEmitter.emit('asset.deleted', { id });

    return { message: 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø£ØµÙ„ Ø¨Ù†Ø¬Ø§Ø­' };
  }

  private async generateAssetCode(categoryId: string, stationId?: string): Promise<string> {
    const category = await this.prisma.asset_categories.findUnique({
      where: { id: categoryId },
    });
    
    const prefix = category?.code || 'AST';
    const year = new Date().getFullYear();
    
    const count = await this.prisma.asset_assets.count({
      where: {
        code: { startsWith: `${prefix}-${year}` },
      },
    });

    return `${prefix}-${year}-${String(count + 1).padStart(4, '0')}`;
  }
}
```

### DTO Ù…Ø«Ø§Ù„

```typescript
// src/modules/assets/dto/create-asset.dto.ts
import { IsString, IsUUID, IsNumber, IsOptional, IsDateString, Min } from 'class-validator';
import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';

export class CreateAssetDto {
  @ApiProperty({ description: 'Ø§Ø³Ù… Ø§Ù„Ø£ØµÙ„' })
  @IsString()
  name: string;

  @ApiProperty({ description: 'Ù…Ø¹Ø±Ù Ø§Ù„ÙØ¦Ø©' })
  @IsUUID()
  categoryId: string;

  @ApiPropertyOptional({ description: 'Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø­Ø·Ø©' })
  @IsUUID()
  @IsOptional()
  stationId?: string;

  @ApiProperty({ description: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù‚ØªÙ†Ø§Ø¡' })
  @IsDateString()
  acquisitionDate: string;

  @ApiProperty({ description: 'ØªÙƒÙ„ÙØ© Ø§Ù„Ø§Ù‚ØªÙ†Ø§Ø¡', minimum: 0 })
  @IsNumber()
  @Min(0)
  acquisitionCost: number;

  @ApiProperty({ description: 'Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠ Ø¨Ø§Ù„Ø£Ø´Ù‡Ø±', minimum: 1 })
  @IsNumber()
  @Min(1)
  usefulLifeMonths: number;

  @ApiPropertyOptional({ description: 'Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®Ø±Ø¯Ø©' })
  @IsNumber()
  @Min(0)
  @IsOptional()
  salvageValue?: number;

  @ApiPropertyOptional({ description: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ' })
  @IsString()
  @IsOptional()
  serialNumber?: string;

  @ApiPropertyOptional({ description: 'Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØµÙ†Ø¹Ø©' })
  @IsString()
  @IsOptional()
  manufacturer?: string;

  @ApiPropertyOptional({ description: 'Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„' })
  @IsString()
  @IsOptional()
  model?: string;
}
```

---

## ğŸ¨ Angular Frontend

### App Configuration

```typescript
// src/app/app.config.ts
import { ApplicationConfig, importProvidersFrom } from '@angular/core';
import { provideRouter } from '@angular/router';
import { provideHttpClient, withInterceptors } from '@angular/common/http';
import { provideAnimations } from '@angular/platform-browser/animations';
import { TranslateModule, TranslateLoader } from '@ngx-translate/core';
import { TranslateHttpLoader } from '@ngx-translate/http-loader';
import { HttpClient } from '@angular/common/http';

import { routes } from './app.routes';
import { authInterceptor } from './core/interceptors/auth.interceptor';
import { errorInterceptor } from './core/interceptors/error.interceptor';

export function HttpLoaderFactory(http: HttpClient) {
  return new TranslateHttpLoader(http, './assets/i18n/', '.json');
}

export const appConfig: ApplicationConfig = {
  providers: [
    provideRouter(routes),
    provideHttpClient(
      withInterceptors([authInterceptor, errorInterceptor])
    ),
    provideAnimations(),
    importProvidersFrom(
      TranslateModule.forRoot({
        defaultLanguage: 'ar',
        loader: {
          provide: TranslateLoader,
          useFactory: HttpLoaderFactory,
          deps: [HttpClient],
        },
      })
    ),
  ],
};
```

### Routes

```typescript
// src/app/app.routes.ts
import { Routes } from '@angular/router';
import { authGuard } from './core/guards/auth.guard';

export const routes: Routes = [
  {
    path: '',
    redirectTo: 'dashboard',
    pathMatch: 'full',
  },
  {
    path: 'auth',
    loadChildren: () => import('./features/auth/auth.routes').then(m => m.AUTH_ROUTES),
  },
  {
    path: 'dashboard',
    loadComponent: () => import('./features/dashboard/dashboard.component').then(m => m.DashboardComponent),
    canActivate: [authGuard],
  },
  {
    path: 'assets',
    loadChildren: () => import('./features/assets/assets.routes').then(m => m.ASSETS_ROUTES),
    canActivate: [authGuard],
  },
  {
    path: '**',
    redirectTo: 'dashboard',
  },
];
```

### Service Ù…Ø«Ø§Ù„

```typescript
// src/app/features/assets/services/assets.service.ts
import { Injectable, inject } from '@angular/core';
import { HttpClient, HttpParams } from '@angular/common/http';
import { Observable } from 'rxjs';
import { environment } from '../../../../environments/environment';
import { Asset, AssetQuery, PaginatedResponse } from '../models/asset.model';

@Injectable({
  providedIn: 'root',
})
export class AssetsService {
  private http = inject(HttpClient);
  private apiUrl = `${environment.apiUrl}/assets`;

  getAssets(query: AssetQuery): Observable<PaginatedResponse<Asset>> {
    let params = new HttpParams();
    
    if (query.page) params = params.set('page', query.page.toString());
    if (query.limit) params = params.set('limit', query.limit.toString());
    if (query.search) params = params.set('search', query.search);
    if (query.categoryId) params = params.set('categoryId', query.categoryId);
    if (query.status) params = params.set('status', query.status);

    return this.http.get<PaginatedResponse<Asset>>(this.apiUrl, { params });
  }

  getAsset(id: string): Observable<Asset> {
    return this.http.get<Asset>(`${this.apiUrl}/${id}`);
  }

  createAsset(asset: Partial<Asset>): Observable<Asset> {
    return this.http.post<Asset>(this.apiUrl, asset);
  }

  updateAsset(id: string, asset: Partial<Asset>): Observable<Asset> {
    return this.http.put<Asset>(`${this.apiUrl}/${id}`, asset);
  }

  deleteAsset(id: string): Observable<void> {
    return this.http.delete<void>(`${this.apiUrl}/${id}`);
  }
}
```

### Component Ù…Ø«Ø§Ù„

```typescript
// src/app/features/assets/components/asset-list/asset-list.component.ts
import { Component, OnInit, inject, signal } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterLink } from '@angular/router';
import { TranslateModule } from '@ngx-translate/core';
import { TableModule } from 'primeng/table';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { DropdownModule } from 'primeng/dropdown';
import { TagModule } from 'primeng/tag';

import { AssetsService } from '../../services/assets.service';
import { Asset, AssetQuery } from '../../models/asset.model';

@Component({
  selector: 'app-asset-list',
  standalone: true,
  imports: [
    CommonModule,
    RouterLink,
    TranslateModule,
    TableModule,
    ButtonModule,
    InputTextModule,
    DropdownModule,
    TagModule,
  ],
  template: `
    <div class="card">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold">{{ 'assets.title' | translate }}</h2>
        <p-button 
          [label]="'assets.add' | translate" 
          icon="pi pi-plus"
          routerLink="new">
        </p-button>
      </div>

      <p-table 
        [value]="assets()" 
        [loading]="loading()"
        [paginator]="true"
        [rows]="10"
        [totalRecords]="totalRecords()"
        [lazy]="true"
        (onLazyLoad)="loadAssets($event)">
        
        <ng-template pTemplate="header">
          <tr>
            <th>{{ 'assets.code' | translate }}</th>
            <th>{{ 'assets.name' | translate }}</th>
            <th>{{ 'assets.category' | translate }}</th>
            <th>{{ 'assets.status' | translate }}</th>
            <th>{{ 'assets.value' | translate }}</th>
            <th>{{ 'common.actions' | translate }}</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-asset>
          <tr>
            <td>{{ asset.code }}</td>
            <td>{{ asset.name }}</td>
            <td>{{ asset.category?.name }}</td>
            <td>
              <p-tag [value]="asset.status" [severity]="getStatusSeverity(asset.status)"></p-tag>
            </td>
            <td>{{ asset.currentValue | currency:'SAR' }}</td>
            <td>
              <p-button icon="pi pi-eye" [text]="true" [routerLink]="[asset.id]"></p-button>
              <p-button icon="pi pi-pencil" [text]="true" [routerLink]="[asset.id, 'edit']"></p-button>
              <p-button icon="pi pi-trash" [text]="true" severity="danger" (click)="deleteAsset(asset)"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  `,
})
export class AssetListComponent implements OnInit {
  private assetsService = inject(AssetsService);

  assets = signal<Asset[]>([]);
  loading = signal(false);
  totalRecords = signal(0);

  ngOnInit() {
    this.loadAssets({ first: 0, rows: 10 });
  }

  loadAssets(event: any) {
    this.loading.set(true);
    
    const query: AssetQuery = {
      page: (event.first / event.rows) + 1,
      limit: event.rows,
    };

    this.assetsService.getAssets(query).subscribe({
      next: (response) => {
        this.assets.set(response.data);
        this.totalRecords.set(response.meta.total);
        this.loading.set(false);
      },
      error: () => {
        this.loading.set(false);
      },
    });
  }

  getStatusSeverity(status: string): string {
    const severities: Record<string, string> = {
      active: 'success',
      maintenance: 'warning',
      disposed: 'danger',
    };
    return severities[status] || 'info';
  }

  deleteAsset(asset: Asset) {
    // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù
  }
}
```

---

## ğŸ’¾ Prisma ORM

### Schema Ù…Ø«Ø§Ù„ (Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ØµÙˆÙ„)

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ==================== Asset System Tables ====================

model asset_categories {
  id          String   @id @default(uuid()) @db.Uuid
  code        String   @unique @db.VarChar(20)
  name        String   @db.VarChar(100)
  nameEn      String?  @map("name_en") @db.VarChar(100)
  parentId    String?  @map("parent_id") @db.Uuid
  
  depreciationMethod  String  @default("straight_line") @map("depreciation_method")
  defaultUsefulLife   Int     @default(60) @map("default_useful_life")
  
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  
  parent      asset_categories?  @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children    asset_categories[] @relation("CategoryHierarchy")
  assets      asset_assets[]
  
  @@map("asset_categories")
}

model asset_assets {
  id                String   @id @default(uuid()) @db.Uuid
  code              String   @unique @db.VarChar(50)
  name              String   @db.VarChar(200)
  nameEn            String?  @map("name_en") @db.VarChar(200)
  
  categoryId        String   @map("category_id") @db.Uuid
  stationId         String?  @map("station_id") @db.Uuid
  locationId        String?  @map("location_id") @db.Uuid
  
  serialNumber      String?  @map("serial_number") @db.VarChar(100)
  manufacturer      String?  @db.VarChar(100)
  model             String?  @db.VarChar(100)
  
  acquisitionDate   DateTime @map("acquisition_date") @db.Date
  acquisitionCost   Decimal  @map("acquisition_cost") @db.Decimal(15, 2)
  salvageValue      Decimal  @default(0) @map("salvage_value") @db.Decimal(15, 2)
  usefulLifeMonths  Int      @map("useful_life_months")
  
  currentValue           Decimal  @map("current_value") @db.Decimal(15, 2)
  accumulatedDepreciation Decimal @default(0) @map("accumulated_depreciation") @db.Decimal(15, 2)
  monthlyDepreciation    Decimal  @map("monthly_depreciation") @db.Decimal(15, 2)
  
  status            String   @default("active") @db.VarChar(20)
  condition         String   @default("good") @db.VarChar(20)
  
  warrantyEndDate   DateTime? @map("warranty_end_date") @db.Date
  lastMaintenanceDate DateTime? @map("last_maintenance_date") @db.Date
  
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  deletedAt         DateTime? @map("deleted_at")
  
  category          asset_categories @relation(fields: [categoryId], references: [id])
  depreciationHistory asset_depreciation[]
  maintenanceHistory  asset_maintenance[]
  
  @@index([categoryId])
  @@index([stationId])
  @@index([status])
  @@map("asset_assets")
}

model asset_depreciation {
  id                    String   @id @default(uuid()) @db.Uuid
  assetId               String   @map("asset_id") @db.Uuid
  period                String   @db.VarChar(7) // YYYY-MM
  
  depreciationAmount    Decimal  @map("depreciation_amount") @db.Decimal(15, 2)
  accumulatedDepreciation Decimal @map("accumulated_depreciation") @db.Decimal(15, 2)
  bookValueBefore       Decimal  @map("book_value_before") @db.Decimal(15, 2)
  bookValueAfter        Decimal  @map("book_value_after") @db.Decimal(15, 2)
  
  journalEntryId        String?  @map("journal_entry_id") @db.Uuid
  
  createdAt             DateTime @default(now()) @map("created_at")
  
  asset                 asset_assets @relation(fields: [assetId], references: [id])
  
  @@unique([assetId, period])
  @@map("asset_depreciation")
}

model asset_maintenance {
  id              String   @id @default(uuid()) @db.Uuid
  assetId         String   @map("asset_id") @db.Uuid
  workOrderNumber String   @unique @map("work_order_number") @db.VarChar(50)
  
  type            String   @db.VarChar(20) // preventive, corrective
  priority        String   @default("medium") @db.VarChar(20)
  status          String   @default("pending") @db.VarChar(20)
  
  description     String?  @db.Text
  rootCause       String?  @map("root_cause") @db.Text
  actionTaken     String?  @map("action_taken") @db.Text
  
  scheduledDate   DateTime? @map("scheduled_date") @db.Date
  startedAt       DateTime? @map("started_at")
  completedAt     DateTime? @map("completed_at")
  
  estimatedHours  Decimal?  @map("estimated_hours") @db.Decimal(5, 2)
  actualHours     Decimal?  @map("actual_hours") @db.Decimal(5, 2)
  
  laborCost       Decimal   @default(0) @map("labor_cost") @db.Decimal(15, 2)
  materialsCost   Decimal   @default(0) @map("materials_cost") @db.Decimal(15, 2)
  totalCost       Decimal   @default(0) @map("total_cost") @db.Decimal(15, 2)
  
  assignedTo      String?   @map("assigned_to") @db.Uuid
  completedBy     String?   @map("completed_by") @db.Uuid
  
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")
  
  asset           asset_assets @relation(fields: [assetId], references: [id])
  
  @@index([assetId])
  @@index([status])
  @@index([type])
  @@map("asset_maintenance")
}
```

### Prisma Service

```typescript
// src/prisma/prisma.service.ts
import { Injectable, OnModuleInit, OnModuleDestroy } from '@nestjs/common';
import { PrismaClient } from '@prisma/client';

@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit, OnModuleDestroy {
  async onModuleInit() {
    await this.$connect();
  }

  async onModuleDestroy() {
    await this.$disconnect();
  }
}
```

---

## ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ø£Ù…Ø§Ù†

### JWT Strategy

```typescript
// src/common/strategies/jwt.strategy.ts
import { Injectable, UnauthorizedException } from '@nestjs/common';
import { PassportStrategy } from '@nestjs/passport';
import { ExtractJwt, Strategy } from 'passport-jwt';
import { ConfigService } from '@nestjs/config';
import { PrismaService } from '../../prisma/prisma.service';

@Injectable()
export class JwtStrategy extends PassportStrategy(Strategy) {
  constructor(
    private configService: ConfigService,
    private prisma: PrismaService,
  ) {
    super({
      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
      ignoreExpiration: false,
      secretOrKey: configService.get<string>('JWT_SECRET'),
    });
  }

  async validate(payload: { sub: string; email: string }) {
    const user = await this.prisma.core_users.findUnique({
      where: { id: payload.sub },
      include: {
        role: {
          include: {
            permissions: true,
          },
        },
      },
    });

    if (!user || !user.isActive) {
      throw new UnauthorizedException('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ ØºÙŠØ± Ù†Ø´Ø·');
    }

    return user;
  }
}
```

### Auth Guard

```typescript
// src/common/guards/jwt-auth.guard.ts
import { Injectable, ExecutionContext } from '@nestjs/common';
import { AuthGuard } from '@nestjs/passport';
import { Reflector } from '@nestjs/core';
import { IS_PUBLIC_KEY } from '../decorators/public.decorator';

@Injectable()
export class JwtAuthGuard extends AuthGuard('jwt') {
  constructor(private reflector: Reflector) {
    super();
  }

  canActivate(context: ExecutionContext) {
    const isPublic = this.reflector.getAllAndOverride<boolean>(IS_PUBLIC_KEY, [
      context.getHandler(),
      context.getClass(),
    ]);

    if (isPublic) {
      return true;
    }

    return super.canActivate(context);
  }
}
```

---

## ğŸ”— Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ø¸Ù…Ø©

### Event Emitter Ù„Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ

```typescript
// src/modules/assets/listeners/asset.listener.ts
import { Injectable } from '@nestjs/common';
import { OnEvent } from '@nestjs/event-emitter';
import { HttpService } from '@nestjs/axios';
import { ConfigService } from '@nestjs/config';

@Injectable()
export class AssetEventListener {
  constructor(
    private httpService: HttpService,
    private configService: ConfigService,
  ) {}

  @OnEvent('asset.created')
  async handleAssetCreated(asset: any) {
    const coreApiUrl = this.configService.get('CORE_API_URL');
    
    await this.httpService.post(`${coreApiUrl}/journal-entries`, {
      type: 'asset_purchase',
      referenceId: asset.id,
      referenceType: 'asset',
      lines: [
        {
          accountCode: '1400',
          debit: asset.acquisitionCost,
          credit: 0,
        },
        {
          accountCode: '1101',
          debit: 0,
          credit: asset.acquisitionCost,
        },
      ],
    }).toPromise();
  }

  @OnEvent('asset.disposed')
  async handleAssetDisposed(data: any) {
    // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯
  }
}
```

### HTTP Client Ù„Ù„ØªÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ø¸Ù…Ø©

```typescript
// src/common/services/integration.service.ts
import { Injectable } from '@nestjs/common';
import { HttpService } from '@nestjs/axios';
import { ConfigService } from '@nestjs/config';
import { firstValueFrom } from 'rxjs';

@Injectable()
export class IntegrationService {
  private systemUrls: Record<string, string>;

  constructor(
    private httpService: HttpService,
    private configService: ConfigService,
  ) {
    this.systemUrls = {
      core: this.configService.get('CORE_API_URL'),
      developer: this.configService.get('DEVELOPER_API_URL'),
      inventory: this.configService.get('INVENTORY_API_URL'),
      billing: this.configService.get('BILLING_API_URL'),
    };
  }

  async callSystem<T>(
    system: string,
    method: 'GET' | 'POST' | 'PUT' | 'DELETE',
    endpoint: string,
    data?: any,
  ): Promise<T> {
    const url = `${this.systemUrls[system]}${endpoint}`;
    
    const response = await firstValueFrom(
      method === 'GET'
        ? this.httpService.get<T>(url)
        : method === 'POST'
        ? this.httpService.post<T>(url, data)
        : method === 'PUT'
        ? this.httpService.put<T>(url, data)
        : this.httpService.delete<T>(url)
    );

    return response.data;
  }
}
```

---

## ğŸš€ Ø§Ù„Ù†Ø´Ø± ÙˆØ§Ù„ØªØ´ØºÙŠÙ„

### Docker Compose Ù„Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ

```yaml
# docker-compose.yml
version: '3.8'

services:
  db:
    image: postgres:16-alpine
    container_name: electricity_db
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: electricity_management
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  api:
    build:
      context: .
      dockerfile: docker/Dockerfile.api
    container_name: ${SYSTEM_NAME}_api
    environment:
      DATABASE_URL: postgresql://postgres:postgres@db:5432/electricity_management
      JWT_SECRET: ${JWT_SECRET}
      PORT: 3000
    ports:
      - "${API_PORT}:3000"
    depends_on:
      - db

  web:
    build:
      context: .
      dockerfile: docker/Dockerfile.web
    container_name: ${SYSTEM_NAME}_web
    ports:
      - "${WEB_PORT}:80"
    depends_on:
      - api

volumes:
  postgres_data:
```

### Environment Variables

```env
# .env.example

# Database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/electricity_management"

# JWT
JWT_SECRET="your-super-secret-key-change-in-production"
JWT_EXPIRES_IN="7d"

# API
API_PORT=3001
API_PREFIX="api/v1"

# Web
WEB_PORT=4201

# Integration URLs
CORE_API_URL="http://localhost:3001/api/v1"
DEVELOPER_API_URL="http://localhost:3002/api/v1"
ASSETS_API_URL="http://localhost:3003/api/v1"
FIELD_OPS_API_URL="http://localhost:3004/api/v1"
SCADA_API_URL="http://localhost:3005/api/v1"
INVENTORY_API_URL="http://localhost:3006/api/v1"
BILLING_API_URL="http://localhost:3007/api/v1"
HR_API_URL="http://localhost:3008/api/v1"
REPORTS_API_URL="http://localhost:3009/api/v1"
PROJECTS_API_URL="http://localhost:3010/api/v1"
```

### Scripts

```json
{
  "scripts": {
    "start": "nx serve",
    "start:api": "nx serve api",
    "start:web": "nx serve web",
    "build": "nx build",
    "build:api": "nx build api",
    "build:web": "nx build web",
    "test": "nx test",
    "lint": "nx lint",
    "db:generate": "prisma generate",
    "db:migrate": "prisma migrate dev",
    "db:push": "prisma db push",
    "db:seed": "ts-node prisma/seed.ts"
  }
}
```

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø­Ø¯Ø©**: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ØªØªØµÙ„ Ø¨Ù†ÙØ³ Ù‚Ø§Ø¹Ø¯Ø© PostgreSQL
2. **ØªØ³Ù…ÙŠØ© Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„**: ÙƒÙ„ Ù†Ø¸Ø§Ù… Ù„Ù‡ Ø¨Ø§Ø¯Ø¦Ø© Ø®Ø§ØµØ© (core_, asset_, bill_, etc.)
3. **Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©**: Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù… ÙŠÙˆÙØ± Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©
4. **Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø¹Ø¨Ø± APIs**: Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ØªØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± HTTP APIs
5. **Ø§Ù„Ø£Ø­Ø¯Ø§Ø«**: Ø§Ø³ØªØ®Ø¯Ø§Ù… Event Emitter Ù„Ù„ØªÙƒØ§Ù…Ù„ ØºÙŠØ± Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†
6. **10 Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª Ù…Ù†ÙØµÙ„Ø©**: ÙƒÙ„ Ù†Ø¸Ø§Ù… ÙÙŠ Ù…Ø³ØªÙˆØ¯Ø¹ GitHub Ø®Ø§Øµ Ø¨Ù‡
